{"id":"lit-ui-router-12h","title":"Document and improve Github CI workflow with actions, tags, and branches","description":"# Document and Improve GitHub CI Workflows\n\n## Current State\n\n4 workflows in `.github/workflows/`:\n- **build-test.yml** - CI pipeline (PR + main push)\n- **publish-gh.yml** - Auto-tag on main push\n- **publish-npm.yml** - Publish on tag `lit-ui-router@*`\n- **bump-version.yml** - Manual version bump + PR\n\n## Documentation Gaps\n\n- [ ] No CI/release documentation in CONTRIBUTING.md or README\n- [ ] Release workflow sequence not documented\n- [ ] Protected environments (bump-version, tag-release, publish) not documented\n- [ ] Tag naming convention (`lit-ui-router@X.Y.Z`) not explained\n- [ ] Fork PR handling and security checks not documented\n\n## Improvements Needed\n\n### Documentation\n- [ ] Create RELEASE.md with complete release workflow guide\n- [ ] Update CONTRIBUTING.md with release section\n- [ ] Document protected environment requirements\n- [ ] Add troubleshooting guide for CI failures\n\n### Workflow\n- [ ] Add inline YAML comments explaining security decisions\n- [ ] Document OIDC trusted publishing vs PAT usage\n- [ ] Document coverage thresholds and Codecov integration\n\n## Tag/Branch Patterns\n\n| Pattern | Purpose |\n|---------|---------|\n| `lit-ui-router@X.Y.Z` | Package release tags |\n| `release/lit-ui-router/vX.Y.Z` | Release prep branches |\n| `main` | Primary integration branch |\n\n## Files to Update\n\n- `.github/workflows/*.yml` - Add comments\n- `CONTRIBUTING.md` - Add release section\n- `RELEASE.md` - Create (new)","status":"open","priority":2,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:27:56.799467-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:27:56.799467-08:00"}
{"id":"lit-ui-router-23w","title":"Review navigation-location-plugin for publish readiness","description":"# Review Checklist for navigation-location-plugin Publish Readiness\n\n## 1. README.md Documentation\n\n**Current State:** Minimal - only 10 lines with external links.\n\n**Needed:**\n- [ ] Badges (npm version, license, build status, browser compatibility)\n- [ ] Package description and purpose statement\n- [ ] Installation instructions\n- [ ] Quick-start usage example\n- [ ] API documentation for `NavigationLocationService` and `navigationLocationPlugin`\n- [ ] Browser compatibility section (Navigation API support)\n- [ ] Comparison with pushState/hash location plugins\n\n## 2. Test Coverage\n\n**Current State:** 0% - no tests despite vitest configured in devDependencies.\n\n**Needed:**\n- [ ] Create `vitest.config.ts` for the package\n- [ ] Unit tests for `NavigationLocationService` class\n- [ ] Tests for `_get()` - URL parsing\n- [ ] Tests for `_set()` - navigation execution\n- [ ] Tests for `_getBasePrefix()` - base href edge cases\n- [ ] Tests for `dispose()` cleanup\n- [ ] Browser tests (playwright available)\n\n## 3. Code Quality\n\n**Current State:** Good structure, strict TypeScript.\n\n**Review:**\n- [ ] Replace deprecated `substr()` with `substring()` (line 55)\n- [ ] Add JSDoc to public methods and class\n- [ ] Review non-null assertions on router parameter\n- [ ] Extract magic strings to constants\n\n## 4. Navigation Event Information\n\n**Current State:** Only passes `title` in NavigateOptions.info.\n\n**Consider enhancing:**\n- [ ] Capture transition metadata in navigation state/info:\n  - `transition.$id` - correlate with UI-Router\n  - `from()`/`to()` state names\n  - `paramsChanged()` - changed params only\n  - `options().source` - 'sref', 'url', 'redirect'\n  - `options().custom` - app-defined data\n- [ ] Listen to `navigate` event (not just `currententrychange`)?\n- [ ] Use cases: analytics, debugging, state sync\n- [ ] JSON-serializable state requirements","status":"open","priority":2,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T20:52:10.11483-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:10:07.116254-08:00"}
{"id":"lit-ui-router-2fz","title":"Update vitepress dev server to support /app/* deep linking","description":"# VitePress Dev Server /app/* Deep Linking\n\n## Context\n\nThe sample-app-lit is embedded in docs at `/app/*`. Deep linking (direct URL access to `/app/contacts/123`) needs to work in both production and development.\n\n## Production (Cloudflare)\n\nCloudflare wrangler `_redirects` already handles `/app/*` deep linking:\n- Requests to `/app/*` are redirected/rewritten to serve the SPA\n- This enables pushState routing to work\n\n## Development (VitePress/Vite)\n\nVitePress dev server needs middleware to support the same behavior:\n- [ ] Add Vite middleware to handle `/app/*` routes\n- [ ] Rewrite requests to serve the SPA index.html\n- [ ] Ensure client-side routing takes over after initial load\n\n## Files to Update\n\n- `docs/vitepress.config.ts` or `docs/vite.config.ts` - Add dev server middleware","status":"closed","priority":0,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:29:12.636361-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:48:51.909223-08:00","closed_at":"2026-01-11T21:48:51.909223-08:00","close_reason":"Added spaFallbackPlugin to docs/.vitepress/vite.config.ts that rewrites /app/* to /app.html, mirroring Cloudflare _redirects behavior"}
{"id":"lit-ui-router-abf","title":"Prepare navigation-location-plugin package for publish","description":"# Publish ui-router-navigation-location-plugin to npm\n\n## Current State\n\n- `lit-ui-router` is published via tag-triggered workflows\n- `navigation-location-plugin` is `\"private\": true` and not set up for publishing\n- Workflows are hardcoded to `lit-ui-router`\n\n## Strategy Options\n\n### A) Duplicate Workflows (Simple but repetitive)\nCreate separate workflow files for each package.\n\n### B) Parameterized Workflows (Recommended)\nModify existing workflows to extract package name from tag pattern and handle multiple packages.\n\n### C) Reusable Workflows\nCreate a reusable workflow called by package-specific triggers.\n\n**Recommendation:** Option B - parameterized workflows. Less duplication, easier maintenance.\n\n---\n\n## Implementation Plan\n\n### 1. Update `packages/navigation-location-plugin/package.json`\n\n- Remove `\"private\": true`\n- Set version to `0.1.0`\n- Add `homepage`, `repository`, `files`, `keywords`\n- Move `@uirouter/core` to peerDependencies\n- Add `release-it` to devDependencies\n\n### 2. Create `packages/navigation-location-plugin/.release-it.json`\n\nConfigure release-it with git tag pattern `${npm.name}@${version}`\n\n### 3. Update `.github/workflows/publish-npm.yml`\n\n- Add tag pattern for `ui-router-navigation-location-plugin@*`\n- Extract package info from tag\n- Parameterize build and pack steps\n\n### 4. Update `.github/workflows/publish-gh.yml`\n\nTag both packages (or make configurable)\n\n### 5. Update `.github/workflows/bump-version.yml`\n\nAdd package selection input for choosing which package to bump\n\n---\n\n## Files to Change\n\n| File | Action |\n|------|--------|\n| `packages/navigation-location-plugin/package.json` | MODIFY - remove private, add metadata |\n| `packages/navigation-location-plugin/.release-it.json` | CREATE |\n| `.github/workflows/publish-npm.yml` | MODIFY - add tag pattern, parameterize |\n| `.github/workflows/publish-gh.yml` | MODIFY - tag both packages |\n| `.github/workflows/bump-version.yml` | MODIFY - add package input |\n\n---\n\n## Verification\n\n1. Run `pnpm --filter ui-router-navigation-location-plugin build` - should succeed\n2. Run `pnpm --filter ui-router-navigation-location-plugin pack` - should create .tgz\n3. Manually trigger bump-version workflow with `ui-router-navigation-location-plugin`\n4. Merge bump PR -\u003e triggers tag -\u003e triggers publish\n\n---\n\n## Decisions Made\n\n- **Initial version:** `0.1.0` (experimental)\n- **Peer dependencies:** Yes, `@uirouter/core` as peerDependency\n- **Keywords:** `ui-router`, `navigation-api`, `location`, `plugin`, `spa`, `routing`","status":"open","priority":2,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T20:47:05.146648-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T20:50:18.94159-08:00","dependencies":[{"issue_id":"lit-ui-router-abf","depends_on_id":"lit-ui-router-23w","type":"blocks","created_at":"2026-01-11T20:52:25.080464-08:00","created_by":"Shane Daniel"}]}
{"id":"lit-ui-router-arm","title":"Add navigation-location-plugin usage examples to sample-app-lit","description":"# Navigation-Location-Plugin Usage Examples \u0026 Documentation\n\nEnhance sample-app-lit with better examples and documentation for the navigation-location-plugin.\n\n## Current State\n- Plugin integration exists via feature flag system\n- Basic console logging of navigation events\n- GA integration shows plugin-aware third-party handling\n\n## Improvements Needed\n\n### 1. Navigation API Interception Examples\nExpand beyond console logging to show practical uses:\n- [ ] Preventing specific navigations\n- [ ] Custom analytics tracking with transition data\n- [ ] Back button handling patterns\n- [ ] Navigation confirmation dialogs\n\n### 2. State Preservation Examples\n- [ ] Passing data through navigation state\n- [ ] Retrieving state from navigation entries\n- [ ] State serialization considerations\n\n### 3. Documentation\n- [ ] Document the plugin abstraction pattern (`locationPluginConfig`)\n- [ ] Document feature flag system for plugin selection\n- [ ] Browser compatibility detection and graceful fallback\n- [ ] Testing patterns for navigation plugin\n\n## Files to Update\n- `apps/sample-app-lit/src/router.config.ts`\n- `apps/sample-app-lit/README.md`","status":"open","priority":3,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:04:11.090553-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:04:11.090553-08:00"}
{"id":"lit-ui-router-cv6","title":"Improve and document turbo monorepo setup","description":"# Improve and Document Turbo Monorepo Setup\n\n## Current State\n\n- Turbo 2.5.5 with pnpm workspaces\n- 5 turbo.json files (root + 4 workspace packages)\n- Well-defined task dependencies and caching\n- CI pipeline combining build/test/lint/format\n\n## Documentation Gaps\n\n- [ ] No turbo workflow guide or documentation\n- [ ] CONTRIBUTING.md outdated (references global turbo install)\n- [ ] No explanation of task dependencies graph\n- [ ] No troubleshooting guide for turbo issues\n\n## Configuration Gaps\n\n- [ ] Examples packages (3) NOT managed by turbo\n  - Have format/lint but no turbo.json or build orchestration\n- [ ] navigation-location-plugin missing test scripts\n  - Has vitest in devDeps but no test task defined\n- [ ] No remote caching configuration for CI\n\n## Improvements\n\n### Documentation\n- [ ] Create TURBO.md with workflow guide\n- [ ] Update CONTRIBUTING.md with modern turbo usage\n- [ ] Document task dependency graph\n- [ ] Add common turbo commands cheatsheet\n\n### Configuration\n- [ ] Add turbo.json to examples (or document exclusion)\n- [ ] Add test scripts to navigation-location-plugin\n- [ ] Consider remote caching setup\n\n## Files to Update\n\n| File | Action |\n|------|--------|\n| CONTRIBUTING.md | Update turbo instructions |\n| TURBO.md | Create workflow guide |\n| examples/*/turbo.json | Add or document exclusion |\n| packages/navigation-location-plugin/package.json | Add test scripts |","status":"open","priority":2,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:11:49.9734-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:16:21.945052-08:00","dependencies":[{"issue_id":"lit-ui-router-cv6","depends_on_id":"lit-ui-router-nzq","type":"blocks","created_at":"2026-01-11T21:17:56.642174-08:00","created_by":"Shane Daniel"}]}
{"id":"lit-ui-router-nzq","title":"Investigate turbo remote cache options","description":"# Investigate Turbo Remote Cache Options\n\n## Goal\n\nEvaluate remote caching solutions for turbo to speed up CI/CD pipelines and local development across machines.\n\n## Options to Investigate\n\n### 1. Vercel Remote Cache (Official)\n- Native integration with turbo\n- Free tier available\n- Requires Vercel account\n- `npx turbo login` + `npx turbo link`\n\n### 2. Cloudflare R2 + Custom Server\n- Self-hosted option using Cloudflare R2 storage\n- No egress fees (cost-effective)\n- Requires custom cache server implementation\n- Options: ducktors/turborepo-remote-cache, custom implementation\n\n### 3. Self-Hosted Options\n- AWS S3 + custom server\n- Google Cloud Storage\n- Azure Blob Storage\n- Local network cache server\n\n## Evaluation Criteria\n\n- [ ] Cost (free tier, per-GB pricing)\n- [ ] Setup complexity\n- [ ] CI/CD integration (GitHub Actions)\n- [ ] Security (team access, token management)\n- [ ] Performance (latency, bandwidth)\n- [ ] Maintenance burden\n\n## References\n\n- [Turbo Remote Caching Docs](https://turbo.build/repo/docs/core-concepts/remote-caching)\n- [Cloudflare R2](https://developers.cloudflare.com/r2/)\n- [ducktors/turborepo-remote-cache](https://github.com/ducktors/turborepo-remote-cache)","status":"open","priority":3,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:17:51.141388-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:17:51.141388-08:00"}
{"id":"lit-ui-router-vnb","title":"Document and improve Cloudflare CD workflows","status":"open","priority":2,"issue_type":"task","owner":"simrpgman@gmail.com","created_at":"2026-01-11T21:53:48.332786-08:00","created_by":"Shane Daniel","updated_at":"2026-01-11T21:53:48.332786-08:00"}
